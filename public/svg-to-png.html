<!DOCTYPE html>
<html>
  <head>
    <title>SVG to PNG Converter</title>
  </head>
  <body>
    <h2>SVG to PNG Converter - Open in Browser</h2>
    <p>
      This will convert your SVG icons to PNG. Open browser console (F12) after
      page loads.
    </p>

    <canvas
      id="canvas192"
      width="192"
      height="192"
      style="border: 1px solid black; margin: 10px"
    ></canvas>
    <canvas
      id="canvas512"
      width="512"
      height="512"
      style="border: 1px solid black; margin: 10px"
    ></canvas>

    <script>
      async function convertSVGtoPNG() {
        const sizes = [192, 512];

        for (const size of sizes) {
          try {
            const response = await fetch(`/pwa-${size}x${size}.svg`);
            const svgText = await response.text();

            const img = new Image();
            const blob = new Blob([svgText], { type: "image/svg+xml" });
            const url = URL.createObjectURL(blob);

            img.onload = function () {
              const canvas = document.getElementById(`canvas${size}`);
              const ctx = canvas.getContext("2d");
              ctx.drawImage(img, 0, 0, size, size);

              canvas.toBlob(function (blob) {
                const link = document.createElement("a");
                link.download = `pwa-${size}x${size}.png`;
                link.href = URL.createObjectURL(blob);
                link.click();
                console.log(`Downloaded pwa-${size}x${size}.png`);
              }, "image/png");

              URL.revokeObjectURL(url);
            };

            img.src = url;
          } catch (error) {
            console.error(`Error converting ${size}x${size}:`, error);
          }
        }
      }

      window.onload = function () {
        console.log("Converting SVG to PNG...");
        setTimeout(convertSVGtoPNG, 1000);
      };
    </script>
  </body>
</html>
